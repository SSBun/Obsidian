**UDP-Lite (Lightweight User Datagram Protocol)** 是一种由 IETF 定义的 UDP 变体协议，它的主要特点是允许数据报中包含**部分未校验**的数据。 

---

## 💡 UDP-Lite 的核心思想

UDP-Lite 的设计是为了满足一些特定的应用场景，特别是**实时多媒体（如音频和视频流）**应用的需求。

### 1. 牺牲完整性以换取实时性

标准的 **UDP** 协议头部有一个 **16 位校验和**字段，用于校验整个数据报（头部和数据载荷）的完整性。如果校验和失败，IP 层会**丢弃**整个数据报。

* **问题**: 对于实时音频或视频流，数据包中的少量损坏（例如，一个像素或声音样本的错误）通常比整个数据包的丢失（导致延迟或卡顿）更容易被应用程序和用户容忍。
* **UDP-Lite 的解决方案**: UDP-Lite 引入了一个新的头部字段来指定进行校验的范围，允许数据报的**尾部**数据不被校验。

### 2. 关键字段：校验和覆盖长度

UDP-Lite 的头部结构与标准 UDP 相似，但用 **校验和覆盖长度 (Checksum Coverage)** 字段代替了标准 UDP 的**总长度**字段。

| 字段 | 长度 | 描述 |
| :--- | :--- | :--- |
| **源端口号** | 16 位 | 同标准 UDP。 |
| **目标端口号** | 16 位 | 同标准 UDP。 |
| **校验和覆盖长度** | 16 位 | 指定从数据报开始（包括头部）需要进行校验的字节数。 |
| **校验和** | 16 位 | 同标准 UDP。 |
| **数据 (Data)** | 可变 | 应用程序数据。 |

* 如果“校验和覆盖长度”小于整个数据报的总长度，那么数据报的**尾部**数据将不被校验。
* 在 IP 层发现并纠正错误是困难且耗时的，因此 UDP-Lite 允许应用程序接收并处理**部分损坏**的数据。

---

## 🎯 适用场景

UDP-Lite 最适用于以下类型的应用：

1.  **容忍错误的数据流**: 应用程序具备一定的**纠错或隐藏错误**能力，能接受数据中的少量错误。
2.  **无线网络 (Wireless Networks)**: 在高误码率的无线或噪声信道中，数据容易损坏。如果使用标准 UDP，一个很小的错误可能导致整个大型数据包被丢弃，造成大量数据损失。UDP-Lite 避免了不必要的丢弃。
3.  **多媒体传输**: 实时音频和视频编码器通常会设计成在数据包丢失时使用预测或插值技术，但在数据包损坏时则较难处理。UDP-Lite 确保了数据包**头部**和**关键控制信息**得到校验，但允许**媒体载荷**的尾部被部分损坏并成功交付。

---

## ⚠️ 兼容性与局限性

* **IP 层兼容性**: UDP-Lite 是在 IP 协议之上运行的，它与 IPv4 和 IPv6 均兼容，使用各自的 **协议号 136** 进行标识（标准 UDP 使用 17）。
* **部署限制**: 尽管 UDP-Lite 在理论上对实时流媒体很有价值，但它的部署并不广泛。许多网络设备（如防火墙和 NAT 设备）并未完全支持或识别协议号 136，因此可能会丢弃 UDP-Lite 数据包。