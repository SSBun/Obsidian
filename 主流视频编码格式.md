[](主流视频封装格式.md)[](主流视频封装格式.md)### H.264 / AVC (Advanced Video Coding)

H.264，也称为 AVC，是由 ITU-T 和 ISO/IEC 于 2003 年联合标准化的视频编码格式。它是过去 20 年最广泛使用的视频标准，基于 YUV 颜色空间（通常 4:2:0 子采样），广泛应用于 Blu-ray、YouTube、直播和视频会议。

#### 压缩策略
- **类型**：主要为有损压缩，支持有限的无损模式。
- **核心机制**：将视频帧分成宏块 (16x16 像素)，使用帧内预测（Intra Prediction，利用当前帧相邻像素预测）和帧间预测（Inter Prediction，利用前后帧运动补偿）。然后应用离散余弦变换 (DCT) 或类似变换将残差转换为频域，通过量化丢弃高频细节。熵编码使用上下文自适应二进制算术编码 (CABAC) 或上下文自适应变长编码 (CAVLC) 打包数据。支持可变比特率 (VBR) 和恒定比特率 (CBR)，典型压缩比 50:1 到 100:1。
- **关键优化**：多参考帧（最多 16 帧）、B 帧（双向预测）和自适应块大小，提高效率。

#### 特性
- 支持分辨率从 QCIF (176x144) 到 8K，帧率高达 300fps。
- 颜色深度：8-bit 主力，支持 10-bit (High 10 Profile)。
- 扩展：包括 SVC (可伸缩视频编码) 和 MVC (多视图编码) 用于 3D 视频。
- 容器兼容：常用于 MP4、MKV、TS 等。
- 在 2025 年，仍是默认标准，几乎所有设备硬件解码支持。

#### 优缺点
- **优点**：
  - 兼容性极高：所有手机、浏览器、电视都支持，直播延迟低（<1s）。
  - 编码速度快：硬件加速成熟（如 NVENC、Quick Sync），适合实时推流。
  - 平衡效率：在 4-8 Mbps 下提供良好 1080p 质量。
- **缺点**：
  - 效率落后：相同质量下文件比 H.265 大 30-50%，不适合 4K+ 内容。
  - 专利问题：虽大部分过期，但早期需授权费。
  - 有限 HDR 支持：需扩展到 H.264 Annex G，不如新格式原生。

H.264 在 2025 年仍是直播和低端设备的“主力”，但正被更高效格式取代。

### H.265 / HEVC (High Efficiency Video Coding)

H.265，也称为 HEVC，是 ITU-T 和 ISO/IEC 于 2013 年标准化的第二代视频格式，旨在比 H.264 效率高 50%。基于 YUV 4:2:0，支持更高分辨率和动态范围。

#### 压缩策略
- **类型**：主要有损压缩，支持无损模式。
- **核心机制**：将帧分成更大的编码树单元 (CTU，最大 64x64)，使用更精细的帧内预测 (35 种模式 vs H.264 的 9 种) 和帧间预测（高级运动矢量预测 AMVP）。变换使用 DCT 和离散 sine 变换 (DST)，量化后应用更先进的 CABAC 熵编码。引入平滑滤波 (SAO) 和去块滤波减少伪影。压缩比典型 100:1 到 200:1。
- **关键优化**：并行处理（Tiles 和 Wavefront），多层扩展 (SHVC) 用于自适应流媒体。

#### 特性
- 支持 8K 分辨率、HDR (10-bit+，Rec.2020 色域)、高帧率 (HFR up to 300fps)。
- 配置文件：Main、Main 10、Main Still Picture 等。
- 扩展：包括屏幕内容编码 (SCC) 用于游戏/远程桌面。
- 容器：MP4、MKV 等，常用于 4K Blu-ray。
- 在 2025 年，高端手机和流媒体平台广泛支持。

#### 优缺点
- **优点**：
  - 高效率：相同质量下比特率比 H.264 低 40-50%，适合 4K/8K 存储和传输。
  - 优秀 HDR 支持：原生处理高动态范围，颜色更丰富。
  - 灵活性：多配置文件适应不同场景，如广播和监控。
- **缺点**：
  - 编码复杂：CPU/GPU 负载高 2-3 倍，实时编码需高端硬件。
  - 专利费用高：多专利池收费，阻碍免费采用（2025 年仍需许可）。
  - 解码功耗大：老设备不支持，手机电池消耗更快。

H.265 在 2025 年是 4K 内容的“黄金标准”，但专利问题让它在开源生态中落后。

### AV1 (AOMedia Video 1)

AV1 是 Alliance for Open Media (AOM，包括 Google、Netflix、Apple 等) 于 2018 年推出的开源视频格式，基于 VP9 和其他技术，旨在取代 H.265。使用 YUV 4:2:0，支持高级颜色采样。

#### 压缩策略
- **类型**：主要有损压缩，支持无损模式。
- **核心机制**：帧分成超级块 (最大 128x128)，使用高级帧内预测 (85 种模式) 和帧间预测（复合参考、仿射运动）。变换包括 DCT、DST 和身份变换，量化后应用方向性环路滤波 (CDEF) 和影视噪声合成。熵编码使用符号运行值编码 (Daala-inspired)。压缩比比 H.265 高 20-30%。
- **关键优化**：Film Grain Synthesis（噪声合成省码率）、可伸缩性 (SVT-AV1) 用于并行编码。

#### 特性
- 支持 12-bit 深度、HDR、宽色域、8K+ 分辨率、高帧率。
- 扩展：包括图像格式 (AVIF)、实时模式 (RTC)。
- 容器：WebM、MP4、MKV。
- 在 2025 年，YouTube、Netflix 默认使用，Android/iOS 原生支持。

#### 优缺点
- **优点**：
  - 顶级效率：相同质量下比特率最低，文件小 20-40%，适合流媒体。
  - 完全免费：无专利费，开源 (libaom、rav1e 等编码器)。
  - 未来导向：优秀 HDR 和噪声处理，适用于 VR/AR。
- **缺点**：
  - 编码极慢：比 H.265 慢 5-10 倍，实时直播需专用硬件 (2025 年 Intel/AMD GPU 支持)。
  - 解码功耗高：老设备不支持，需软件 fallback。
  - 采用中：虽普及，但浏览器支持不全 (Safari 完整支持从 2023 年)。

AV1 在 2025 年是“开源王者”，主导 YouTube 和 Netflix 的 4K 内容。

### VP9 (Video Processor 9)

VP9 是 Google 于 2013 年推出的开源格式，基于 VP8，旨在为 YouTube 提供高效压缩。使用 YUV 4:2:0，支持 HDR。

#### 压缩策略
- **类型**：主要有损压缩，支持无损。
- **核心机制**：超级块 (64x64)，帧内预测 (10 种模式) 和帧间预测（分段运动补偿）。变换使用 DCT 和 Walsh-Hadamard，量化后应用环路滤波。熵编码使用非二进制算术编码。压缩比接近 H.265。
- **关键优化**：自适应量化、Alt-Ref 帧（隐形参考帧省码率）。

#### 特性
- 支持 8K、HDR (10-bit)、高帧率。
- 配置文件：Profile 0 (8-bit 4:2:0)、Profile 2 (10/12-bit)。
- 容器：主要 WebM，也支持 MP4。
- 在 2025 年，主要用于老 YouTube 视频和 Android。

#### 优缺点
- **优点**：
  - 免费开源：无专利，易集成 (libvpx 编码器)。
  - 效率好：比特率比 H.264 低 30-40%，支持 HDR。
  - 浏览器友好：Chrome、Firefox 原生支持。
- **缺点**：
  - 已被 AV1 取代：效率低 20-30%，编码更慢。
  - 有限硬件支持：2025 年新设备转向 AV1。
  - 复杂场景弱：如快速运动或噪声处理不如 AV1。

VP9 在 2025 年是“过渡格式”，主要遗留在老内容中。

### VVC / H.266 (Versatile Video Coding)

VVC，也称为 H.266，是 ITU-T 和 ISO/IEC 于 2020 年标准化的第三代格式，旨在比 H.265 效率高 30-50%。基于 YUV 4:2:0，支持超高分辨率。

#### 压缩策略
- **类型**：主要有损压缩，支持无损。
- **核心机制**：更大 CTU (128x128)，高级帧内预测 (67 种模式) 和帧间预测（矩阵加权、几何分区）。变换包括多种大小 DCT/DST，量化后应用自适应环路滤波 (ALF) 和交叉组件滤波。熵编码使用更优化的 CABAC。压缩比 200:1+。
- **关键优化**：多类型树分区、AI 辅助工具（未来扩展）。

#### 特性
- 支持 16K 分辨率、HDR、360° 视频、高帧率。
- 扩展：屏幕内容、点云编码。
- 容器：MP4、MKV 等。
- 在 2025 年，刚开始商用，高端 TV 和手机支持。

#### 优缺点
- **优点**：
  - 极致效率：比特率最低，适合 8K/16K 和低带宽传输。
  - 多功能：原生支持 VR、屏幕共享等新兴场景。
  - 质量高：减少伪影，动态范围广。
- **缺点**：
  - 编码极复杂：CPU 负载高 4-5 倍，实时应用难。
  - 专利昂贵：多专利池，费用比 H.265 高 2 倍。
  - 采用缓慢：2025 年仅 20% 设备支持，需 fallback 到 H.265。

VVC 在 2025 年是“未来先锋”，预计 2030 年普及于 8K 时代。