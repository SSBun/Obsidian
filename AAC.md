AAC（Advanced Audio Coding，高级音频编码）是今天几乎所有平台（苹果、YouTube、B站、抖音、Netflix、直播）实际使用的“王者”音频编码器。它在 128～256kbps 就能达到“几乎听不出和原版区别”的透明音质，完胜同码率的 MP3。下面用最直白的方式，概诉 AAC 从 PCM 输入到输出 AAC 码流的全过程（以主流的 AAC-LC 为例，苹果、FFmpeg、FAAC、fdk-aac 都是这个流程）。

### AAC 编码器完整流水线（一图秒懂）

```
PCM（时域波形）
    ↓
1. MDCT 变换（改良离散余弦变换）
    ↓
2. 时频谱（一堆频率系数）
    ↓
3. 心理声学模型（Psychoacoustic Model）
    ↓
4. 同时掩蔽 + 时间掩蔽阈值计算
    ↓
5. 量化 + 比特分配（把听不到的细节砍掉）
    ↓
6. TNS（时域噪声整形）（可选，减少预回声）
    ↓
7. M/S（中侧立体声）+ Intensity（强度立体声）（可选，省码率）
    ↓
8. 预测（可选，主要在 AAC-Main 档次用）
    ↓
9. 噪声填充 + PNS + 频带复制 SBR（仅 HE-AAC 使用）
    ↓
10. 熵编码（霍夫曼编码）
    ↓
AAC 码流（.aac 或 .m4a 里的音频轨道）
```

### 逐个击破关键步骤（真正决定 AAC 牛的地方）

| 步骤                 | 干了什么                                     | 为什么能省那么多码率 |
|----------------------|----------------------------------------------|----------------------|
| 1. MDCT              | 把每 1024 或 960 个 PCM 样本（约 23ms）变成 1024 个频率系数 | 能量集中到少数系数上 |
| 2. 心理声学模型      | 实时算出“人耳这一刻根本听不到的频率和强度” | 直接把这些系数设为 0 |
| 3. 同时掩蔽           | 大声的钢琴把旁边弱小吉他盖住了 → 吉他系数砍掉 | 同一时刻省码率       |
| 4. 时间掩蔽           | 爆炸声后 100ms 内人耳暂时聋 → 爆炸后细节砍掉 | 跨帧省码率           |
| 5. 量化 + 比特分配   | 用更粗的“步长”量化人耳不敏感的频段           | 核心压缩手段         |
| 6. TNS（时域噪声整形）| 把量化噪声从时间上“抹匀”，避免预回声         | 打击乐更干净         |
| 7. M/S 立体声         | 左右声道相同部分只存一次，差值再存一次       | 立体声节省 20~40%    |
| 8. SBR（频带复制）   | 只传低频，高频用低频“复制+调整”假装出来     | HE-AAC 在 64kbps 还能听 |

### AAC 的三种主流“档次”（Profile）对比

| 档次          | 常见名称         | 包含技术                              | 典型码率         | 典型场景                         |
|---------------|------------------|---------------------------------------|------------------|----------------------------------|
| AAC-LC        | Low Complexity   | 基础 + TNS + M/S                      | 128~320kbps      | 苹果音乐、YouTube、B站、直播主力 |
| AAC-HE v1     | HE-AAC           | LC + SBR（频带复制）                  | 64~128kbps       | 以前的 3G 流媒体、广播           |
| AAC-HE v2     | HE-AAC v2        | HE v1 + PS（参数立体声）              | 32~64kbps        | 以前手机铃声、超低码率语音       |

2025 年你几乎只用到 **AAC-LC**（256kbps 左右）就够了，HE-AAC 基本只在极低码率才出现。

### 实际编码器（你真正会用到的）

| 编码器      | 质量排名（公认） | 授权/费用     | 推荐场景                     |
|-------------|------------------|---------------|------------------------------|
| fdk-aac     | ★★★★★（最高）    | 开源但有授权限制 | Android、FFmpeg 推荐         |
| Apple AAC   | ★★★★☆            | 闭源          | iTunes、iPhone 硬件编码      |
| FAAC        | ★★☆☆☆            | 完全免费      | 仅用于测试                   |
| Nero AAC    | ★★★★★（已死）    | 停更多年     | 曾经神器                     |
| libfdk_aac  | 同 fdk-aac       |               | FFmpeg 默认最佳              |

### 一句话总结 AAC 为什么这么强
AAC 不是简单粗暴地“砍数据”，而是：
每 23 毫秒就用心理声学模型精确算出“人耳这一刻到底听不到什么”，然后只保留能听到的部分，其他全扔，再加上 TNS、M/S、SBR 等一堆黑科技。

结果就是：
256kbps 的 AAC 能达到 320kbps MP3 都达不到的透明音质，128kbps 的 AAC 能吊打 320kbps 的 MP3。

这就是为什么全世界都抛弃 MP3、统一投降 AAC 的真正原因。